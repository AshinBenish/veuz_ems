{% extends 'base.html' %}
{% load static %}
{% block top_script %}
{% endblock top_script %}
{% block content %}
{% verbatim %}
<div class="p-6" ng-app="emsApp" ng-controller="profileController">
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">Profile</h1>
        <p class="text-gray-600">Manage your account settings and preferences</p>
    </div>
    <div class="max-w-2xl mx-auto">
        <div dir="ltr" data-orientation="horizontal" class="space-y-6">
            <div role="tablist" aria-orientation="horizontal"
                class="h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-muted-foreground grid w-full grid-cols-2"
                tabindex="0" data-orientation="horizontal" style="outline: none;">
                <button type="button" role="tab" aria-selected="true" aria-controls="radix-:r3:-content-profile"
                    ng-click="currentView = 'profile'"
                    ng-class="{'bg-white' : currentView === 'profile', 'bg-gray-100' : currentView !== 'profile'}"
                    id="radix-:r3:-trigger-profile" id="radix-:r3:-trigger-profile"
                    class="justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center space-x-2"
                    tabindex="-1" data-orientation="horizontal" data-radix-collection-item="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-user w-4 h-4">
                        <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span>Profile</span>
                </button>
                <button type="button" role="tab" aria-selected="false" aria-controls="radix-:r3:-content-password"
                    ng-click="currentView = 'password'"
                    ng-class="{'bg-white' : currentView === 'password', 'bg-gray-100' : currentView !== 'password'}"
                    data-state="inactive" id="radix-:r3:-trigger-password"
                    class="justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center space-x-2"
                    tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><svg
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-lock w-4 h-4">
                        <rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg><span>Password</span>
                </button>
            </div>
            <div data-orientation="horizontal" role="tabpanel" ng-show="currentView === 'profile'" ng-cloak
                aria-labelledby="radix-:r3:-trigger-profile" id="radix-:r3:-content-profile" tabindex="0"
                class="mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2">
                <div class="rounded-lg text-card-foreground border-0 shadow-sm bg-white">
                    <div class="flex flex-col space-y-1.5 p-6">
                        <h3 class="text-2xl font-semibold leading-none tracking-tight flex items-center space-x-2"><svg
                                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="lucide lucide-user w-5 h-5 text-green-600">
                                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <span>Profile Information</span>
                        </h3>
                    </div>
                    <div class="p-6 pt-0">
                        <form class="space-y-6" ng-submit="updateProfile()">
                            <div class="flex items-center space-x-6">
                                <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center"><svg
                                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" class="lucide lucide-user w-10 h-10 text-green-600">
                                        <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-lg font-medium text-gray-900">{{profile.username}}</h3>
                                    <p class="text-gray-600">{{profile.email}}</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="space-y-2">
                                    <label
                                        class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                                        for="name">Full Name
                                    </label>
                                    <input
                                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 focus:ring-2 focus:ring-green-500"
                                        id="name" placeholder="Enter your full name" required="" type="text"
                                        ng-model="username">
                                </div>
                                <div class="space-y-2">
                                    <label
                                        class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                                        for="email">Email Address
                                    </label>
                                    <div class="relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round"
                                            class="lucide lucide-mail absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4">
                                            <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                                            <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                        </svg>
                                        <input
                                            class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 transition-all duration-200 focus:ring-2 focus:ring-green-500"
                                            id="email" placeholder="Enter your email" required="" type="email"
                                            ng-model="email">
                                    </div>
                                </div>
                            </div>
                            <button
                                class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"
                                type="submit"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round"
                                    class="lucide lucide-save w-4 h-4 mr-2">
                                    <path
                                        d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z">
                                    </path>
                                    <path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"></path>
                                    <path d="M7 3v4a1 1 0 0 0 1 1h7"></path>
                                </svg>Update Profile
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            <div data-state="" data-orientation="horizontal" role="tabpanel" ng-show="currentView === 'password'" ng-cloak
                aria-labelledby="radix-:r3:-trigger-password" id="radix-:r3:-content-password" tabindex="0"
                class="mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2">
                <div class="rounded-lg text-card-foreground border-0 shadow-sm bg-white">
                    <div class="flex flex-col space-y-1.5 p-6">
                        <h3 class="text-2xl font-semibold leading-none tracking-tight flex items-center space-x-2"><svg
                                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="lucide lucide-lock w-5 h-5 text-green-600">
                                <rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg><span>Change Password</span></h3>
                    </div>
                    <div class="p-6 pt-0">
                        <form class="space-y-6" ng-submit="updatePassword()">
                            <div class="space-y-2">
                                <label
                                    class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                                    for="currentPassword">Current Password
                                </label>
                                <div class="relative w-full">
                                    <input type="password" id="password" ng-model="oldPassword" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pr-10 text-sm ring-offset-background 
                                    placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring 
                                    focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 
                                    transition-all duration-200 focus:ring-2 focus:ring-green-500"
                                        placeholder="Enter your password" required ng-modal="password">

                                    <!-- Eye icon -->
                                    <button type="button"
                                        class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700"
                                        onclick="this.previousElementSibling.type = this.previousElementSibling.type === 'password' ? 'text' : 'password'; 
                     this.innerHTML = this.previousElementSibling.type === 'password' 
                         ? '<i class=&quot;fas fa-eye&quot;></i>' 
                         : '<i class=&quot;fas fa-eye-slash&quot;></i>';">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <label
                                    class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                                    for="newPassword">New Password
                                </label>
                                <div class="relative w-full">
                                    <input type="password" id="password" ng-model="newPassword" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pr-10 text-sm ring-offset-background 
                                    placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring 
                                    focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 
                                    transition-all duration-200 focus:ring-2 focus:ring-green-500"
                                        placeholder="Enter your password" required ng-modal="password">

                                    <!-- Eye icon -->
                                    <button type="button"
                                        class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700"
                                        onclick="this.previousElementSibling.type = this.previousElementSibling.type === 'password' ? 'text' : 'password'; 
                     this.innerHTML = this.previousElementSibling.type === 'password' 
                         ? '<i class=&quot;fas fa-eye&quot;></i>' 
                         : '<i class=&quot;fas fa-eye-slash&quot;></i>';">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <label
                                    class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                                    for="confirmPassword">Confirm New Password
                                </label>
                                <div class="relative w-full">
                                    <input type="password" id="password" ng-model="confirmPassword" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pr-10 text-sm ring-offset-background 
                                    placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring 
                                    focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 
                                    transition-all duration-200 focus:ring-2 focus:ring-green-500"
                                        placeholder="Enter your password" required ng-modal="password">

                                    <!-- Eye icon -->
                                    <button type="button"
                                        class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700"
                                        onclick="this.previousElementSibling.type = this.previousElementSibling.type === 'password' ? 'text' : 'password'; 
                     this.innerHTML = this.previousElementSibling.type === 'password' 
                         ? '<i class=&quot;fas fa-eye&quot;></i>' 
                         : '<i class=&quot;fas fa-eye-slash&quot;></i>';">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="bg-yellow-50 border border-yellow-200 rounded-md p-4">
                                <h4 class="text-sm font-medium text-yellow-800 mb-2">Password Requirements:</h4>
                                <ul class="text-sm text-yellow-700 space-y-1">
                                    <li>• At least 6 characters long</li>
                                    <li>• Include both upper and lowercase letters</li>
                                    <li>• Include at least one number</li>
                                </ul>
                            </div><button
                                class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"
                                type="submit"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round"
                                    class="lucide lucide-lock w-4 h-4 mr-2">
                                    <rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                </svg>Change Password</button>
                        </form>
                    </div>
                </div>
            </div>
            <div data-state="inactive" data-orientation="horizontal" role="tabpanel"
                aria-labelledby="radix-:r3:-trigger-password" hidden="" id="radix-:r3:-content-password" tabindex="0"
                class="mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2">
            </div>
        </div>
    </div>
</div>
{% endverbatim %}
{% endblock content %}
{% block bottom_script_cdn %}
<script src="{% static 'js/app.js' %}"></script>
<script src="{% static 'js/services/apiService.js' %}"></script>
<script src="{% static 'js/services/toastService.js' %}"></script>
<script src="{% static 'js/controllers/profileController.js' %}"></script>
{% endblock bottom_script_cdn %}